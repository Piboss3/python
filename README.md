# 虚拟货币数据分析工具

该工具基于 Python 编写，利用多种数据处理和分析库，对金融资产的历史数据进行综合分析。包括数据预处理、可视化图表绘制、相关性分析、时间序列特性分析以及应用高级模型进行波动率和因果关系等探索。

## 环境配置

### 安装 Python

建议使用 Python 3.8 及以上版本。可以从 [Python 官方网站](https://www.python.org/downloads/) 下载安装。

### 安装依赖库

该工具依赖于多个 Python 库，可以通过以下命令安装必要的依赖：

```bash
pip install pandas numpy matplotlib seaborn scikit-learn statsmodels arch
```

如果在安装过程中遇到问题，请确保你的 pip 是最新版本，可以使用以下命令升级：

```bash
pip install --upgrade pip
```

然后再次尝试安装依赖。如果你使用的是 Anaconda 环境，也可以通过 Anaconda 的包管理器安装这些库。

### 数据准备

需要准备包含金融资产历史数据的 CSV 文件，文件应包含以下列：

- `Date`：日期，格式为 YYYY-MM-DD
- `Close`：收盘价
- `Open`：开盘价
- `High`：最高价
- `Low`：最低价
- `Volume`：交易量（可选，如果没有则忽略相关分析部分）
- `Change`：涨跌幅（可选，如果没有则忽略相关分析部分）

## 使用说明

### 修改文件路径

将代码中注释部分的 `file_paths` 列表中的文件路径替换为你实际存放 CSV 数据文件的路径，确保路径正确无误。

### 运行代码

在安装好所有依赖库之后，在包含代码的目录下打开终端或命令行，直接运行以下命令即可开始分析：

```bash
python your_script_name.py
```

将 `your_script_name.py` 替换为你的实际脚本文件名。

### 分析结果

分析结果会以图表的形式保存在脚本文件所在目录下，文件名为分析对应的标题加上相关的描述，例如 `以太坊历史数据USD_价格交易量.png`。在脚本运行过程中，也会在终端中输出一些分析的文字结果，如模型摘要、检验结果等。

## 功能模块介绍

### 数据预处理
- 重命名列名，将英文列名转换为中文。
- 转换日期格式为 datetime 类型。
- 处理价格和交易量格式，去除可能存在的逗号或单位后缀，并转换为数值类型。
- 填充缺失值，使用前向填充和后向填充。
- 添加技术指标，如均线、收益率和波动率。

### 可视化图表
- 绘制价格和交易量图表，包含多种均线和价格区间。
- 绘制变量之间的相关性热力图。
- 绘制滚动相关性图表，分析变量之间的动态关系。
- 绘制波动率图表，分析价格波动情况。
- 绘制收益率分布图，分析收益特性。

### 时间序列特性分析
- 进行季节性分解，分析数据的周期性成分。
- 绘制自相关和偏自相关图，分析序列的自相关性。

### 高级模型分析
- 使用 GARCH 模型分析波动率特征。
- 进行格兰杰因果检验，分析变量之间的因果关系。
- 进行协整分析，检验变量之间的长期均衡关系。
- 使用 VAR 模型进行多变量时间序列分析，包括脉冲响应分析和未来价格预测。

## 注意事项

- 确保输入数据的质量和完整性，避免出现大量缺失值或异常值。
- 部分分析功能对数据长度有一定要求（如 GARCH 模型、协整分析等），如果数据量不足可能无法正常执行。
- 在实际应用中，可以根据需要选择性地使用部分功能模块，注释掉不需要的部分以节省运行时间。

## 示例

### 输入数据示例

假设输入的 CSV 文件内容如下（部分列可能缺失，但至少包含 `Date`、`Close`）：

| Date       | Close  | Open  | High  | Low   | Volume       | Change    |
|------------|--------|-------|-------|-------|--------------|-----------|
| 2020-01-01 | 100.00 | 99.50 | 101.2 | 98.70 | 1,200,000    | 0.5       |
| 2020-01-02 | 102.30 | 100.2 | 103.5 | 100.0 | 1.1M         | 2.3       |
| 2020-01-03 | 98.70  | 101.0 | 102.3 | 97.80 | 1,500,500    | -3.5      |
| ...        | ...    | ...   | ...   | ...   | ...          | ...       |

### 输出结果示例

- 价格与交易量图表，显示收盘价、多种均线和每日价格区间，以及交易量的柱状图。
- 相关性热力图，展示变量之间的相关系数。
- 滚动相关性图表，分析收盘价与开盘价之间的动态相关性变化。
- 波动率图表，标记高波动率区域。
- 收益率分布图，显示收益率的分布情况，包括均值和中位数。
- 时间序列分析的季节性分解图，展示观测值、趋势、季节性和残差的分解结果。
- 自相关和偏自相关图，分析序列的自相关性。
- GARCH 模型分析结果，包括模型摘要和条件波动率的图表。
- 格兰杰因果检验结果，显示不同滞后阶数下的 p 值。
- 协整分析结果，包括 t 统计量和 p 值，以及价格比率图表。
- VAR 模型分析结果，包括模型摘要、脉冲响应函数图和未来价格预测图。
